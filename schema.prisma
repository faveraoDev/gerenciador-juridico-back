datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Usuario {
  ID_usuario     String   @id @default(uuid()) @map("ID_usuario")
  NOME_usuario   String   @map("NOME_usuario")
  EMAIL_usuario  String   @unique @map("EMAIL_usuario")
  SENHA_usuario  String   @map("SENHA_usuario")
  criadoEm       DateTime @default(now()) @map("criado_em")
  atualizadoEm   DateTime @updatedAt @map("atualizado_em")

  @@map("Usuarios")
}

model Advogado {
  ID_advogado    String                    @id @default(uuid()) @map("ID_advogado")
  NOME_advogado  String?                    
  CPF_advogado   String?                   @unique 
  OAB_advogado   String?                   @unique 
  DTNSC_advogado DateTime?                 @map("DTNSC_advogado")
  TEL_advogado  String?
  EMAIL_advogado String?
  STATUS_advogado Boolean?
  advProcessos   AdvogadoProcessoCliente[]

  @@map("Advogados")
}

model Cliente {
  ID_cliente            String  @id @default(uuid()) @map("ID_cliente")
  NOME_cliente          String
  RG_cliente            String?
  CPF_cliente           String? @unique
  DTNSC_cliente         DateTime?
  EMAIL_cliente         String?
  TEL_cliente           String?
  OCUPACAO_cliente      String?
  JUSTGRAT_cliente      Boolean?
  NMREND_cliente        String?
  COMPL_cliente         String?
  Enderecos_ID_endereco String?

  endereco  Endereco?              @relation(fields: [Enderecos_ID_endereco], references: [ID_endereco], onDelete: SetNull)
  processos ProcessosHasClientes[]

  @@map("clientes")
}

model Processo {
  ID_processo        String                 @id @default(uuid()) @map("ID_processo")
  NUMERO_processo    String?
  STATUS_processo         String?
  DATAINICIO_processo     DateTime?
  Locais_ID_local    String?
  local              Locais?                @relation(fields: [Locais_ID_local], references: [ID_local], onDelete: SetNull)
  documentos         DocumentoProcesso[]
  clientes           ProcessosHasClientes[]
  ProcessosHasLocais ProcessosHasLocais[]

  @@map("Processos")
}

model Documento {
  ID_documento   String              @id @default(uuid()) @map("ID_documento")
  TIPO_documento String?
  DATA_documento DateTime?
  DESC_documento String?
  processos      DocumentoProcesso[]

  @@map("Documentos")
}

model DocumentoProcesso {
  Documentos_ID_documento String
  Processos_ID_processo   String

  documento Documento @relation(fields: [Documentos_ID_documento], references: [ID_documento], onDelete: Cascade)
  processo  Processo  @relation(fields: [Processos_ID_processo], references: [ID_processo], onDelete: Cascade)

  @@id([Documentos_ID_documento, Processos_ID_processo])
  @@map("Documentos_has_Processos")
}

model ProcessosHasClientes {
  Processos_ID_processo String
  Clientes_ID_cliente   String

  processo Processo @relation(fields: [Processos_ID_processo], references: [ID_processo], onDelete: Cascade)
  cliente  Cliente  @relation(fields: [Clientes_ID_cliente], references: [ID_cliente], onDelete: Cascade)

  advogados AdvogadoProcessoCliente[]

  @@id([Processos_ID_processo, Clientes_ID_cliente])
  @@map("Processos_has_Clientes")
}

model AdvogadoProcessoCliente {
  Advogados_ID_advogado String
  Processos_ID_processo String
  Clientes_ID_cliente   String

  advogado        Advogado             @relation(fields: [Advogados_ID_advogado], references: [ID_advogado], onDelete: Cascade)
  processoCliente ProcessosHasClientes @relation(fields: [Processos_ID_processo, Clientes_ID_cliente], references: [Processos_ID_processo, Clientes_ID_cliente], onDelete: Cascade)

  @@id([Advogados_ID_advogado, Processos_ID_processo, Clientes_ID_cliente])
  @@map("Advogados_has_Processos_has_Clientes")
}

model Endereco {
  ID_endereco String  @id @default(uuid())
  CEP_endereco      String?
  LGDR_endereco     String?
  NOME_endereco     String?
  UF_endereco       String?
  BAIRRO_endereco   String?
  CIDADE_endereco   String?

  clientes Cliente[]

  @@map("enderecos")
}

model Locais {
  ID_local              String  @id @default(uuid()) @map("ID_local")
  NOME_local            String?

  processos ProcessosHasLocais[]
  Processo  Processo[]

  @@map("locais")
}

model ProcessosHasLocais {
  Processos_ID_processo String @map("Processos_ID_processo")
  Locais_ID_local       String @map("Locais_ID_local")

  processo Processo @relation(fields: [Processos_ID_processo], references: [ID_processo], onDelete: Cascade)
  local    Locais   @relation(fields: [Locais_ID_local], references: [ID_local], onDelete: Cascade)

  @@id([Processos_ID_processo, Locais_ID_local])
  @@map("processos_has_locais")
}
